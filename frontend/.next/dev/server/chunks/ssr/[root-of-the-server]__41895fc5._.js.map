{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/Myself/ai-form-generator/frontend/app/form/%5Bid%5D/submissions/page.tsx"],"sourcesContent":["'use client';\r\nimport { useEffect, useState } from 'react';\r\nimport { useParams, useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\n\r\nexport default function SubmissionsPage() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const [submissions, setSubmissions] = useState<any[]>([]);\r\n  const [formTitle, setFormTitle] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      router.push('/auth/login');\r\n      return;\r\n    }\r\n    fetchSubmissions(token);\r\n  }, []);\r\n\r\n  const fetchSubmissions = async (token: string) => {\r\n    try {\r\n      const response = await fetch(`http://localhost:5000/api/forms/${params.id}/submissions`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      const data = await response.json();\r\n      setSubmissions(data.submissions || []);\r\n      setFormTitle(data.formTitle || 'Form');\r\n    } catch (error) {\r\n      console.error('Failed to fetch submissions:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleString('en-US', {\r\n      month: 'short',\r\n      day: 'numeric',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-purple-100 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"relative w-24 h-24 mx-auto mb-6\">\r\n            <div className=\"absolute inset-0 border-4 border-blue-200 rounded-full\"></div>\r\n            <div className=\"absolute inset-0 border-4 border-blue-600 rounded-full border-t-transparent animate-spin\"></div>\r\n          </div>\r\n          <p className=\"text-xl font-semibold text-gray-700\">Loading submissions...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-100 py-8\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <Link\r\n            href=\"/dashboard\"\r\n            className=\"inline-flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-6 group\"\r\n          >\r\n            <svg className=\"w-5 h-5 group-hover:-translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n            </svg>\r\n            Back to Dashboard\r\n          </Link>\r\n\r\n          <div className=\"bg-white/90 backdrop-blur-xl rounded-2xl shadow-xl p-8 border border-white/50\">\r\n            <div className=\"flex items-start justify-between\">\r\n              <div>\r\n                <h1 className=\"text-4xl font-bold text-gray-800 mb-2\">\r\n                  {formTitle}\r\n                </h1>\r\n                <p className=\"text-gray-600 text-lg\">\r\n                  Total Submissions: <span className=\"font-bold text-blue-600\">{submissions.length}</span>\r\n                </p>\r\n              </div>\r\n              <div className=\"bg-gradient-to-br from-blue-500 to-purple-600 text-white px-6 py-3 rounded-xl font-bold text-xl shadow-lg\">\r\n                {submissions.length}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Submissions */}\r\n        {submissions.length === 0 ? (\r\n          <div className=\"text-center py-20 bg-white/90 backdrop-blur-xl rounded-2xl shadow-xl border border-white/50\">\r\n            <div className=\"w-24 h-24 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n              <svg className=\"w-12 h-12 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\r\n              </svg>\r\n            </div>\r\n            <h3 className=\"text-2xl font-bold text-gray-800 mb-3\">No submissions yet</h3>\r\n            <p className=\"text-gray-600 max-w-md mx-auto\">\r\n              Share your form link to start collecting responses\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-6\">\r\n            {submissions.map((submission, idx) => (\r\n              <div\r\n                key={submission._id}\r\n                className=\"bg-white/90 backdrop-blur-xl rounded-2xl shadow-lg hover:shadow-2xl transition-all p-6 border border-white/50\"\r\n              >\r\n                {/* Submission Header */}\r\n                <div className=\"flex items-center justify-between mb-6 pb-4 border-b border-gray-200\">\r\n                  <div className=\"flex items-center gap-4\">\r\n                    <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg\">\r\n                      #{submissions.length - idx}\r\n                    </div>\r\n                    <div>\r\n                      <h3 className=\"text-lg font-bold text-gray-800\">\r\n                        Submission #{submissions.length - idx}\r\n                      </h3>\r\n                      <p className=\"text-sm text-gray-500\">\r\n                        {formatDate(submission.submittedAt)}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2 text-sm text-green-600 bg-green-50 px-4 py-2 rounded-lg font-semibold\">\r\n                    <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\r\n                    </svg>\r\n                    Completed\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Responses Grid */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\r\n                  {Object.entries(submission.responses).map(([key, value]: [string, any]) => (\r\n                    <div key={key} className=\"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-4 border-l-4 border-blue-500\">\r\n                      <p className=\"text-xs font-bold text-gray-500 uppercase tracking-wide mb-1\">\r\n                        {key}\r\n                      </p>\r\n                      <p className=\"text-gray-800 font-medium break-words\">\r\n                        {typeof value === 'string' && (value.startsWith('http://') || value.startsWith('https://')) ? (\r\n                          <a\r\n                            href={value}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            className=\"text-blue-600 hover:underline flex items-center gap-2\"\r\n                          >\r\n                            View Link\r\n                            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\r\n                            </svg>\r\n                          </a>\r\n                        ) : (\r\n                          value\r\n                        )}\r\n                      </p>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                {/* Uploaded Files */}\r\n                {submission.imageUrls && submission.imageUrls.length > 0 && (\r\n                  <div className=\"mt-6 pt-6 border-t border-gray-200\">\r\n                    <p className=\"text-sm font-bold text-gray-700 mb-3 flex items-center gap-2\">\r\n                      <svg className=\"w-5 h-5 text-blue-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                        <path fillRule=\"evenodd\" d=\"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z\" clipRule=\"evenodd\" />\r\n                      </svg>\r\n                      Uploaded Files ({submission.imageUrls.length})\r\n                    </p>\r\n                    <div className=\"flex flex-wrap gap-3\">\r\n                      {submission.imageUrls.map((img: any, imgIdx: number) => (\r\n                        <a\r\n                          key={imgIdx}\r\n                          href={img.url}\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          className=\"inline-flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-all shadow-md hover:shadow-lg\"\r\n                        >\r\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\r\n                          </svg>\r\n                          View File {imgIdx + 1}\r\n                        </a>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Metadata */}\r\n                {(submission.ipAddress || submission.userAgent) && (\r\n                  <div className=\"mt-6 pt-6 border-t border-gray-200 flex flex-wrap items-center gap-4 text-xs text-gray-500\">\r\n                    {submission.ipAddress && (\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9\" />\r\n                        </svg>\r\n                        IP: {submission.ipAddress}\r\n                      </div>\r\n                    )}\r\n                    {submission.userAgent && (\r\n                      <div className=\"flex items-center gap-2 truncate max-w-md\">\r\n                        <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n                        </svg>\r\n                        Device: {submission.userAgent.split(' ')[0]}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}